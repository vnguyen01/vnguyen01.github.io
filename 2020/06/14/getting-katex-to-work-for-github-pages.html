<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>KaTeX for Github Pages | Blog</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="KaTeX for Github Pages" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="KaTeX is a JavaScript library that renders LaTeX faster than MathJax. Unfortunately, Github Pages does not support the jekyll-katex plugin, but there is a way around that by building the site locally and pushing the contents of the site to master." />
<meta property="og:description" content="KaTeX is a JavaScript library that renders LaTeX faster than MathJax. Unfortunately, Github Pages does not support the jekyll-katex plugin, but there is a way around that by building the site locally and pushing the contents of the site to master." />
<link rel="canonical" href="/2020/06/14/getting-katex-to-work-for-github-pages.html" />
<meta property="og:url" content="/2020/06/14/getting-katex-to-work-for-github-pages.html" />
<meta property="og:site_name" content="Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-14T00:00:00-04:00" />
<script type="application/ld+json">
{"url":"/2020/06/14/getting-katex-to-work-for-github-pages.html","headline":"KaTeX for Github Pages","dateModified":"2020-06-14T00:00:00-04:00","datePublished":"2020-06-14T00:00:00-04:00","description":"KaTeX is a JavaScript library that renders LaTeX faster than MathJax. Unfortunately, Github Pages does not support the jekyll-katex plugin, but there is a way around that by building the site locally and pushing the contents of the site to master.","mainEntityOfPage":{"@type":"WebPage","@id":"/2020/06/14/getting-katex-to-work-for-github-pages.html"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
  <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
  ></script>
  <script type="text/javascript" src="/assets/js/bootstrap-toc.min.js"></script><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Blog" />
    





  
</head>
<body data-spy="scroll" data-target="#toc"><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger" class="label-nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">


  <div class="row">
    <div class="col-sm-3">
        <nav id="toc" data-toggle="toc" class="sticky-top"></nav>
    </div>
    <div class="col-sm-9">
      <header class="post-header">
        <h1 class="post-title p-name" itemprop="name headline">KaTeX for Github Pages</h1>
        <p class="post-meta">
          <time class="dt-published" datetime="2020-06-14T00:00:00-04:00" itemprop="datePublished">Jun 14, 2020 | 
              
              <a href="/tag/jekyll"><nobr>jekyll</nobr>&nbsp;</a>
            
              
              <a href="/tag/github"><nobr>github</nobr>&nbsp;</a>
            
              
              <a href="/tag/katex"><nobr>katex</nobr>&nbsp;</a>
            
              
              <a href="/tag/latex"><nobr>latex</nobr>&nbsp;</a>
            
          </time></p>
      </header>
      <div class="post-content e-content" itemprop="articleBody">
      <h2 id="what-happens-on-github">What Happens on GitHub</h2>
<p>When you push the code of your static website to Github, Github builds and serves the site much like how you 
can locally build and serve the site. Now, here’s an important distinction I never picked up on from the <a href="https://help.github.com/en/github/working-with-github-pages/creating-a-github-pages-site">tutorial</a>:</p>
<ol>
  <li>If you’re pushing to a directory named <code class="language-plaintext highlighter-rouge">USERNAME.github.io</code>, then you are setting up a user website, and 
the code <em>must</em> be pushed to the <code class="language-plaintext highlighter-rouge">master</code> branch.</li>
  <li>If you’re not pushing to a directory named as such, then you’re setting up a project website, and the code <em>needs</em> 
to go into a branch named <code class="language-plaintext highlighter-rouge">gh-pages</code>.</li>
</ol>

<h3 id="dependencies-and-plug-ins">Dependencies and Plug-ins</h3>
<p>Github Pages provides a really nice service of hosting these static sites. It comes with a caveat though which is only 
<a href="https://pages.github.com/versions/">certain plug-ins will be supported</a>. This means that some of the newer ones that people 
use a lot on non-Github Pages hosted sites such as <code class="language-plaintext highlighter-rouge">jekyll-paginate-v2</code> and <code class="language-plaintext highlighter-rouge">jekyll-tagging</code> will not let your site be 
built and served by Github.</p>

<p>One of these unsupported plug-ins is <code class="language-plaintext highlighter-rouge">jekyll-katex</code>. I’ll try to explain how I got it to ‘work’ on Github Pages.</p>

<h2 id="getting-katex-or-other-custom-plug-in-to-work">Getting KaTeX (or Other Custom Plug-in) to Work</h2>
<p><a href="https://katex.org/">KaTeX</a> was developed by Khan Academy. There are a few Jekyll plug-ins for it, and the one I used is 
<code class="language-plaintext highlighter-rouge">jekyll-katex</code> where more documentation can be found <a href="https://github.com/linjer/jekyll-katex">here</a>. First, let’s go 
through the steps of getting it to work <em>locally</em>.</p>

<h3 id="locally-building-and-serving">Locally Building and Serving</h3>
<p>As per the instructions we’ll have to include the plug-in in our <code class="language-plaintext highlighter-rouge">_config.yml</code> and also in the <code class="language-plaintext highlighter-rouge">Gemfile</code>. Next, 
we need to run <code class="language-plaintext highlighter-rouge">bundle install</code> to make sure the dependency will be installed within <code class="language-plaintext highlighter-rouge">vendor/bundle</code>.</p>

<p>Next, we want to link the CSS needed by putting the following within the <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> tag of the <code class="language-plaintext highlighter-rouge">_includes/head.html</code> file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"&gt;
</code></pre></div></div>

<p>For me, rebuilding and serving the site allows <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>KaTeX</mtext></mrow><annotation encoding="application/x-tex">\KaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.89883em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">K</span><span class="mspace" style="margin-right:-0.17em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.68333em;"><span style="top:-2.904999em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.46782999999999997em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span> to render! FYI, I sometimes get a warning:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Found a Liquid block containing the excerpt separator "\n\n". 
</code></pre></div></div>

<p>when I encapsulate my entire post in a mixed environment tag. This <a href="https://github.com/linjer/jekyll-katex/issues/25">open issue references the warning</a>. 
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>KaTeX</mtext></mrow><annotation encoding="application/x-tex">\KaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.89883em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">K</span><span class="mspace" style="margin-right:-0.17em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.68333em;"><span style="top:-2.904999em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.46782999999999997em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span> is powerful because it comes with some packages already installed.</p>

<h3 id="only-serve-content-on-github">Only Serve Content on Github</h3>

<p>When we build the site, all the HTML goes into the folder <code class="language-plaintext highlighter-rouge">_site</code>. If we want the website to work for Github Pages, then 
we need to only upload the contents <em>inside</em> <code class="language-plaintext highlighter-rouge">_site</code> to the <code class="language-plaintext highlighter-rouge">master</code> branch. However, it’s good to keep the source code also 
in the same repository, but on a separate branch. I followed this <a href="https://www.drewsilcock.co.uk/custom-jekyll-plugins">tutorial</a> that 
showed me how to separate the two branches to get this to work.</p>

<p>There were two things that I had to do differently.</p>
<ol>
  <li>The <code class="language-plaintext highlighter-rouge">git branch --set-upstream master origin/master</code> command is outdated so I had to do <code class="language-plaintext highlighter-rouge">git branch --set-upstream-to=origin/master master</code>.</li>
  <li>I couldn’t get the <code class="language-plaintext highlighter-rouge">git remote add origin https://github.com/USERNAME/USERNAME.github.io</code> to work and had to instead do 
<code class="language-plaintext highlighter-rouge">git remote set-url origin https://USERNAME@github.com/USERNAME/USERNAME.github.io.git</code>.</li>
</ol>

<p>There’s also a bash script that is provided to automate this process but I couldn’t get it to work. 
I have all my source code in a branch called <code class="language-plaintext highlighter-rouge">gh-pages</code> and the <code class="language-plaintext highlighter-rouge">master</code> branch lives within the <code class="language-plaintext highlighter-rouge">_site</code> folder.
This is what does work for me:</p>

<ol>
  <li>Always test locally in the root directory of your project. This is the level where you have the folders <code class="language-plaintext highlighter-rouge">_site</code>, <code class="language-plaintext highlighter-rouge">_includes</code>, etc.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle exec jekyll serve
</code></pre></div>    </div>
    <p>This rebuilds the website where you can see it at your localhost.</p>
  </li>
  <li>When are you ready to commit, be sure to rebuild to regenerate all of the files in <code class="language-plaintext highlighter-rouge">_site</code>. Be sure to 
include the <code class="language-plaintext highlighter-rouge">.nojekyll</code> file in <code class="language-plaintext highlighter-rouge">_site</code> which lets Github know to only generate the site from the HTML.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git checkout gh-pages
 git add .
 git commit -am 'update source code`
 git push origin gh-pages
 touch _site/.nojekyll
 cd _site
 git add .
 git commit -am 'update website html'
 git push origin master -f
</code></pre></div>    </div>
  </li>
</ol>

<p>This is probably not the best practice when it comes to Git…but it does the job.</p>

<h3 id="bash-script">Bash Script</h3>
<p>I reformatted these commands into 
the bash script in the tutorial to avoid having to type this out each time and to have the same commit message for both 
branches.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#!/bin/bash

# https://gist.github.com/drewsberry/1b9fc80682edd8bcecc4

if [[ -z "$1" ]]; then
  echo "Please enter a git commit message."
  exit
fi

git checkout gh-pages &amp;&amp; \
git add . &amp;&amp; \
git commit -am "$1" &amp;&amp; \
git push origin gh-pages &amp;&amp; \
echo "Source successfully pushed to GitHub."
bundle exec jekyll build &amp;&amp; \
touch _site/.nojekyll &amp;&amp; \
cd _site &amp;&amp; \
git add . &amp;&amp; \
git commit -am "$1" &amp;&amp; \
git push origin master &amp;&amp; \
cd .. &amp;&amp; \
echo "Site successfully build and pushed to GitHub."
</code></pre></div></div>

      </div>
    </div>
  </div><a class="u-url" href="/2020/06/14/getting-katex-to-work-for-github-pages.html" hidden></a>
</article>

      </div>
    </main><script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js" integrity="sha384-SlE991lGASHoBfWbelyBPLsUlwY1GwNDJo3jSJO04KZ33K2bwfV9YBauFfnzvynJ" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <!--<h2 class="footer-heading">Blog</h2>-->

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blog</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/vnguyen01"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">vnguyen01</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p></p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
